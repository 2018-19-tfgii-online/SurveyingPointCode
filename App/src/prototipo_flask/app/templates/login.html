{% extends "base.html" %}

{% block content %}
   <div class="container-fluid">
      <div class="row justify-content-center">
         <div class="col-md-6">
            <div class="card" id="login_card">
               <div class="row no-gutters justify-content-center">
                  <div class="col-md-6 p-5 d-none d-md-block" id="login_left_logo"> <!-- Hide on screens smaller than md -->
                     <div class="row h-100 justify-content-center p-3">
                        <img src="{{ url_for('static', filename='images/logo_login.svg') }}" class="card-img img-fluid" alt="Surveying Point Code Logo">
                     </div>
                  </div>
                  <div class="col-md-6 p-2 d-md-none" id="login_top_logo"> <!-- Hide on screens wider than md -->
                     <div class="row h-100 justify-content-center p-2">
                        <img src="{{ url_for('static', filename='images/logo_login_min.svg') }}" class="card-img img-fluid" alt="Surveying Point Code Logo">
                     </div>
                  </div>                     
                  <div class="col-md-6">
                     <div class="card-body p-3">
                        <h5 class="card-title font-weight-bolder pb-2">Login</h5>
                        <form action="" method="post" role="form" novalidate>
                           {{ form.hidden_tag() }}
                           <div class="form-group">
                              {{ form.email.label }}
                              <input type="email" class="form-control form-control-sm {{ 'is-invalid' if post and form.email.errors else 'is-valid' if post and not form.email.errors }}" id="email" name="email" placeholder="Enter email" value="{{ email }}" required>
                              <div class="invalid-feedback">{{ form.email.errors[0] }}</div> 
                              <div class="valid-feedback">Looks good!</div>
                           </div>  
                           <div class="form-group">
                              {{ form.password.label }}
                              <input type="password" class="form-control form-control-sm {{ 'is-invalid' if post and form.password.errors }}" id="password" name="password" placeholder="Enter password" required>
                              <div class="invalid-feedback">{{ form.password.errors[0] }}</div>
                           </div>
                           <div class="form-group">
                              <div class="custom-control custom-checkbox">
                                 <input type="checkbox" class="custom-control-input" id="customCheck1">
                                 <label class="custom-control-label" for="customCheck1"> Remember me</label>                                    
                              </div>
                           </div>
                           <div class="row d-flex align-items-center justify-content-center">
                              <button type="submit" class="btn btn-success btn-sm mr-2"><i class="far fa-paper-plane"></i> Submit</button>
                              <a class="btn btn-primary btn-sm" href="{{ url_for('index') }}" role="button"><i class="fas fa-ban"></i> Cancel</a>
                           </div>                              
                        </form>
                        <div>
                           <p class="text-center mt-3">Not Registered? <a href="{{ url_for('register') }}">Create an account</a></p>
                        </div>                           
                        <p class="mb-0 text-center" style="line-height: normal">
                           <small><strong>SurveyingPointCode by J. Eduardo Risco</br>&copy; 2018-2019</strong></small>
                        </p>
                     </div>
                  </div>
               </div>
            </div>
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for message in messages %}
            {% if "Error" in message[1]: %}
            <div class="alert alert-dismissible alert-danger fade show" role="alert" id="alert">
               <i class="fas fa-times"></i>&nbsp;&nbsp;<strong>Error!</strong> {{ message[1].strip('Error:') }}
               <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
               </button>             
            </div>
            {% elif 'logged in' in message[1]: %}
            <div class="alert alert-dismissible alert-warning fade show" role="alert" id="alert">
               <i class="fas fa-exclamation-triangle"></i>&nbsp;&nbsp;<strong>Warning!</strong> {{ message[1] }}
               <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
               </button>            
            </div>
            {% else %}
            <div class="alert alert-dismissible alert-success fade show" role="alert" id="alert">
               <i class="fas fa-check-circle"></i>&nbsp;&nbsp;<strong>Success!</strong> {{ message[1] }}
               <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
               </button>            
            </div>            
            {% endif %}   
            {% endfor %}
            {% endif %}
            {% endwith %}               
         </div>
      </div>
   </div>
{% endblock %}