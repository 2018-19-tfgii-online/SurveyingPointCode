CAD_COLORS = [
    'rgb(0, 0, 0)', 'rgb(255, 0, 0)', 'rgb(255, 255, 0)', 'rgb(0, 255, 0)', 'rgb(0, 255, 255)',
    'rgb(0, 0, 255)', 'rgb(255, 0, 255)', 'rgb(255, 255, 255)', 'rgb(128, 128, 128)',
    'rgb(192, 192, 192)', 'rgb(255, 0, 0)', 'rgb(255, 127, 127)', 'rgb(204, 0, 0)',
    'rgb(204, 102, 102)', 'rgb(153, 0, 0)', 'rgb(153, 76, 76)', 'rgb(127, 0, 0)',
    'rgb(127, 63, 63)', 'rgb(76, 0, 0)', 'rgb(76, 38, 38)', 'rgb(255, 63, 0)',
    'rgb(255, 159, 127)', 'rgb(204, 51, 0)', 'rgb(204, 127, 102)', 'rgb(153, 38, 0)',
    'rgb(153, 95, 76)', 'rgb(127, 31, 0)', 'rgb(127, 79, 63)', 'rgb(76, 19, 0)',
    'rgb(76, 47, 38)', 'rgb(255, 127, 0)', 'rgb(255, 191, 127)', 'rgb(204, 102, 0)',
    'rgb(204, 153, 102)', 'rgb(153, 76, 0)', 'rgb(153, 114, 76)', 'rgb(127, 63, 0)',
    'rgb(127, 95, 63)', 'rgb(76, 38, 0)', 'rgb(76, 57, 38)', 'rgb(255, 191, 0)',
    'rgb(255, 223, 127)', 'rgb(204, 153, 0)', 'rgb(204, 178, 102)', 'rgb(153, 114, 0)',
    'rgb(153, 133, 76)', 'rgb(127, 95, 0)', 'rgb(127, 111, 63)', 'rgb(76, 57, 0)',
    'rgb(76, 66, 38)', 'rgb(255, 255, 0)', 'rgb(255, 255, 127)', 'rgb(204, 204, 0)',
    'rgb(204, 204, 102)', 'rgb(152, 152, 0)', 'rgb(152, 152, 76)', 'rgb(127, 127, 0)',
    'rgb(127, 127, 63)', 'rgb(76, 76, 0)', 'rgb(76, 76, 38)', 'rgb(191, 255, 0)',
    'rgb(223, 255, 127)', 'rgb(153, 204, 0)', 'rgb(178, 204, 102)', 'rgb(114, 152, 0)',
    'rgb(133, 152, 76)', 'rgb(95, 127, 0)', 'rgb(111, 127, 63)', 'rgb(57, 76, 0)',
    'rgb(66, 76, 38)', 'rgb(127, 255, 0)', 'rgb(191, 255, 127)', 'rgb(102, 204, 0)',
    'rgb(153, 204, 102)', 'rgb(76, 152, 0)', 'rgb(114, 152, 76)', 'rgb(63, 127, 0)',
    'rgb(95, 127, 63)', 'rgb(38, 76, 0)', 'rgb(57, 76, 38)', 'rgb(63, 255, 0)',
    'rgb(159, 255, 127)', 'rgb(51, 204, 0)', 'rgb(127, 204, 102)', 'rgb(38, 152, 0)',
    'rgb(95, 152, 76)', 'rgb(31, 127, 0)', 'rgb(79, 127, 63)', 'rgb(19, 76, 0)',
    'rgb(47, 76, 38)', 'rgb(0, 255, 0)', 'rgb(127, 255, 127)', 'rgb(0, 204, 0)',
    'rgb(102, 204, 102)', 'rgb(0, 152, 0)', 'rgb(76, 152, 76)', 'rgb(0, 127, 0)',
    'rgb(63, 127, 63)', 'rgb(0, 76, 0)', 'rgb(38, 76, 38)', 'rgb(0, 255, 63)',
    'rgb(127, 255, 159)', 'rgb(0, 204, 51)', 'rgb(102, 204, 127)', 'rgb(0, 152, 38)',
    'rgb(76, 152, 95)', 'rgb(0, 127, 31)', 'rgb(63, 127, 79)', 'rgb(0, 76, 19)',
    'rgb(38, 76, 47)', 'rgb(0, 255, 127)', 'rgb(127, 255, 191)', 'rgb(0, 204, 102)',
    'rgb(102, 204, 153)', 'rgb(0, 152, 76)', 'rgb(76, 152, 114)', 'rgb(0, 127, 63)',
    'rgb(63, 127, 95)', 'rgb(0, 76, 38)', 'rgb(38, 76, 57)', 'rgb(0, 255, 191)',
    'rgb(127, 255, 223)', 'rgb(0, 204, 153)', 'rgb(102, 204, 178)', 'rgb(0, 152, 114)',
    'rgb(76, 152, 133)', 'rgb(0, 127, 95)', 'rgb(63, 127, 111)', 'rgb(0, 76, 57)',
    'rgb(38, 76, 66)', 'rgb(0, 255, 255)', 'rgb(127, 255, 255)', 'rgb(0, 204, 204)',
    'rgb(102, 204, 204)', 'rgb(0, 152, 152)', 'rgb(76, 152, 152)', 'rgb(0, 127, 127)',
    'rgb(63, 127, 127)', 'rgb(0, 76, 76)', 'rgb(38, 76, 76)', 'rgb(0, 191, 255)',
    'rgb(127, 223, 255)', 'rgb(0, 153, 204)', 'rgb(102, 178, 204)', 'rgb(0, 114, 152)',
    'rgb(76, 133, 152)', 'rgb(0, 95, 127)', 'rgb(63, 111, 127)', 'rgb(0, 57, 76)',
    'rgb(38, 66, 76)', 'rgb(0, 127, 255)', 'rgb(127, 191, 255)', 'rgb(0, 102, 204)',
    'rgb(102, 153, 204)', 'rgb(0, 76, 152)', 'rgb(76, 114, 152)', 'rgb(0, 63, 127)',
    'rgb(63, 95, 127)', 'rgb(0, 38, 76)', 'rgb(38, 57, 76)', 'rgb(0, 63, 255)',
    'rgb(127, 159, 255)', 'rgb(0, 51, 204)', 'rgb(102, 127, 204)', 'rgb(0, 38, 152)',
    'rgb(76, 95, 152)', 'rgb(0, 31, 127)', 'rgb(63, 79, 127)', 'rgb(0, 19, 76)',
    'rgb(38, 47, 76)', 'rgb(0, 0, 255)', 'rgb(127, 127, 255)', 'rgb(0, 0, 204)',
    'rgb(102, 102, 204)', 'rgb(0, 0, 152)', 'rgb(76, 76, 152)', 'rgb(0, 0, 127)',
    'rgb(63, 63, 127)', 'rgb(0, 0, 76)', 'rgb(38, 38, 76)', 'rgb(63, 0, 255)',
    'rgb(159, 127, 255)', 'rgb(51, 0, 204)', 'rgb(127, 102, 204)', 'rgb(38, 0, 152)',
    'rgb(95, 76, 152)', 'rgb(31, 0, 127)', 'rgb(79, 63, 127)', 'rgb(19, 0, 76)',
    'rgb(47, 38, 76)', 'rgb(127, 0, 255)', 'rgb(191, 127, 255)', 'rgb(102, 0, 204)',
    'rgb(153, 102, 204)', 'rgb(76, 0, 152)', 'rgb(114, 76, 152)', 'rgb(63, 0, 127)',
    'rgb(95, 63, 127)', 'rgb(38, 0, 76)', 'rgb(57, 38, 76)', 'rgb(191, 0, 255)',
    'rgb(223, 127, 255)', 'rgb(153, 0, 204)', 'rgb(178, 102, 204)', 'rgb(114, 0, 152)',
    'rgb(133, 76, 152)', 'rgb(95, 0, 127)', 'rgb(111, 63, 127)', 'rgb(57, 0, 76)',
    'rgb(66, 38, 76)', 'rgb(255, 0, 255)', 'rgb(255, 127, 255)', 'rgb(204, 0, 204)',
    'rgb(204, 102, 204)', 'rgb(152, 0, 152)', 'rgb(152, 76, 152)', 'rgb(127, 0, 127)',
    'rgb(127, 63, 127)', 'rgb(76, 0, 76)', 'rgb(76, 38, 76)', 'rgb(255, 0, 191)',
    'rgb(255, 127, 223)', 'rgb(204, 0, 153)', 'rgb(204, 102, 178)', 'rgb(152, 0, 114)',
    'rgb(152, 76, 133)', 'rgb(127, 0, 95)', 'rgb(127, 63, 111)', 'rgb(76, 0, 57)',
    'rgb(76, 38, 66)', 'rgb(255, 0, 127)', 'rgb(255, 127, 191)', 'rgb(204, 0, 102)',
    'rgb(204, 102, 153)', 'rgb(152, 0, 76)', 'rgb(152, 76, 114)', 'rgb(127, 0, 63)',
    'rgb(127, 63, 95)', 'rgb(76, 0, 38)', 'rgb(76, 38, 57)', 'rgb(255, 0, 63)',
    'rgb(255, 127, 159)', 'rgb(204, 0, 51)', 'rgb(204, 102, 127)', 'rgb(152, 0, 38)',
    'rgb(152, 76, 95)', 'rgb(127, 0, 31)', 'rgb(127, 63, 79)', 'rgb(76, 0, 19)',
    'rgb(76, 38, 47)', 'rgb(51, 51, 51)', 'rgb(91, 91, 91)', 'rgb(132, 132, 132)',
    'rgb(173, 173, 173)', 'rgb(214, 214, 214)', 'rgb(255, 255, 255)'
];

let selectedColorPicker = '';

document.addEventListener('DOMContentLoaded', () => {
    // Show cookies advise
    if (!$.cookie('spc-visited')) {
        $.cookie('spc-visited', 'visited', { expires: 7, path: '/' });
        $('#cookies-advise').modal({show:true});
        $('#cookies-advise').on('show.bs.modal', () => {
            $('#cookies-advise').css('margin-right', $(window).width() - $('.modal-content').width());
        });
    }

    // Automatically close alerts after 5 seconds
    window.setTimeout(() => {
        $('#alert').fadeTo(500, 0).slideUp(500, () => {
            $(this).remove();
        });
    }, 5000);

    // Animate custom file input
    bsCustomFileInput.init();

    // Color picker instantiation
    $('input.color-picker').ColorPickerSliders({
        placement: 'bottom',
        size: 'sm',
        swatches: CAD_COLORS,
        customswatches: false,
        preventtouchkeyboardonshow: true,
        order: {}
    });

    // Set color picker input readonly when selected
    $('input.color-picker').click(function(e) {
        selectedColorPicker = $(this).attr('name');
        $(this).prop('readonly', true);
        $(this).trigger('colorpickersliders.show');
    });

    // Hide color picker popover when color is selected
    $(document).on('click', '.cp-popover-container div.btn.btn-default.cp-swatch', function(e) {
        $('input.color-picker[name=' + selectedColorPicker + ']').trigger('colorpickersliders.hide');
        selectedColorPicker = '';
    });

    // Make items in the list of converted files clickable
    $(document.body).on('click', '.alert.converted-item[data-clickable=true]', e => {
        var href = $(e.currentTarget).data('href');
        window.location = href;
    });
});

// Show spinner when generating DXF file
modal = () => {
    $('.modal.load-spinner').modal('show');
}